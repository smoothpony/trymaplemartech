<!DOCTYPE html>
<html>
<head>
    <title>Ackee Forced Tracking</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; padding: 1rem; }
        button { padding: 10px 20px; background: #007cba; color: white; border: none; cursor: pointer; margin: 10px 5px; }
        #status { color: orange; }
        button:disabled { background: #cccccc; cursor: not-allowed; }
    </style>
</head>
<body>
    <h1>‚úÖ Ackee Force-Enable Demo</h1>
    <p>Status: <strong id="status">Loading tracker...</strong></p>
    
    <button id="pageViewBtn" disabled>üìà Track Page View</button>
    <button id="clickBtn" disabled>üñ±Ô∏è Track Button Click</button>
    <button id="customBtn" disabled>‚ö° Track Custom Event</button>
    <button id="debugBtn" onclick="showDebug()">üîç Show Debug Info</button>
    
    <script>
        // DISABLE LOCALHOST CHECK ENTIRELY
        window.ackeeSettings = { ignoreLocalhost: false };
        
        let ackeeInstance = null;
        
        // HARDCORE PATCH: Override localhost detection
        function patchAckee() {
            // Patch the function that checks localhost
            if (typeof ackeeTracker !== 'undefined' && ackeeTracker.detect) {
                const originalDetect = ackeeTracker.detect;
                ackeeTracker.detect = function() {
                    console.log('üìç Ackee localhost check bypassed');
                    return false; // Never ignore
                };
            }
        }
        
        // Function to initialize when tracker loads
        function initAckee() {
            try {
                // Create Ackee instance with correct parameters
                ackeeInstance = ackeeTracker.create(
                    'http://localhost:3000',  // server URL
                    '3f1839c8-06a4-4046-b785-c83763978b7a'          // domain ID - REPLACE THIS
                );
                
                // Enable buttons
                document.getElementById('pageViewBtn').disabled = false;
                document.getElementById('clickBtn').disabled = false;
                document.getElementById('customBtn').disabled = false;
                document.getElementById('status').innerHTML = '‚úÖ Tracking ready!<br>Click buttons to test.';
                document.getElementById('status').style.color = 'green';
                
            } catch (error) {
                console.error('Failed to initialize Ackee:', error);
                document.getElementById('status').textContent = '‚ùå Init failed: ' + error.message;
                document.getElementById('status').style.color = 'red';
            }
        }
        
        function trackPageView() {
            if (ackeeInstance) {
                ackeeInstance.record();
                alert('üìä Page view tracked!');
            }
            
        }
        
        function trackButtonClick() {
    // DIRECT API FALLBACK
    fetch('http://localhost:3000/api/actions', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            domainId: '3f1839c8-06a4-4046-b785-c83763978b7a',
            name: 'button-click',
            meta: { forced: true }
                alert('üñ±Ô∏è Button click tracked!');
            }
    });
}
        }
        
        function trackCustomEvent() {
            if (ackeeInstance) {
                ackeeInstance.action('custom-event', {
                    label: 'User performed custom action',
                    value: Math.random()
                });
                alert('‚ö° Custom event tracked!');
            }
        }
         function showDebug() {
            console.log('=== ACKEE DEBUG INFO ===');
            console.log('Window location:', window.location);
            console.log('Ackee object:', typeof ackeeTracker !== 'undefined' ? 'LOADED' : 'MISSING');
            if (ackeeInstance) {
                console.log('Ackee instance:', ackeeInstance);
            }
        }
        // Set up button event listeners
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('pageViewBtn').addEventListener('click', trackPageView);
            document.getElementById('clickBtn').addEventListener('click', trackButtonClick);
            document.getElementById('customBtn').addEventListener('click', trackCustomEvent);
        });
    </script>
    
    <!-- Load tracker AFTER setting up the init function -->
    <script async src="http://localhost:3000/tracker.js" onload="initAckee()"></script>
</body>
</html>
